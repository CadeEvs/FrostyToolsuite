<ctrl2:FrostyWindow x:Class="FrostyEditor.MainWindow"
                    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                    xmlns:local="clr-namespace:FrostyEditor"
                    xmlns:ctrl2="clr-namespace:Frosty.Controls;assembly=FrostyControls"
                    xmlns:core="clr-namespace:Frosty.Core.Controls;assembly=FrostyCore"
                    xmlns:coreroot="clr-namespace:Frosty.Core;assembly=FrostyCore"
                    xmlns:conv="clr-namespace:Frosty.Core.Converters;assembly=FrostyCore"
                    xmlns:cmd="clr-namespace:FrostyEditor.Commands"
                    xmlns:ext="clr-namespace:FrostyEditor.Extensions"
                    mc:Ignorable="d"
                    MinWidth="500"
                    MinHeight="250"
                    Icon="/FrostyEditor;component/AppIcon.ico"
                    Height="802"
                    Width="1448"
                    FrostyLoaded="FrostyWindow_Loaded"
                    WindowState="Maximized"
                    Title="Frosty Editor"
                    Closing="FrostyWindow_Closing">
    <ctrl2:FrostyWindow.Resources>
        <conv:BooleanToVisibilityConverter x:Key="booleanToVisibilityConverter" />
        <cmd:ExportModMenuItemCommand x:Key="exportModMenuItemCommand" />
        <ContextMenu x:Key="bookmarksContextMenu">
            <MenuItem Header="Open asset"
                      Click="contextMenuBookmarkItemOpen_Click">
                <MenuItem.Icon>
                    <Image Source="/FrostyEditor;component/Images/OpenAsset.png"
                           RenderOptions.BitmapScalingMode="Fant" />
                </MenuItem.Icon>
            </MenuItem>
            <MenuItem Header="Find in explorer"
                      Click="contextMenuBookmarkItemFind_Click" />
        </ContextMenu>
        <ContextMenu x:Key="pluginStatusImageContextMenu">
            <MenuItem Click="CopyFullExceptionMenuItem_Click"
                      Header="Copy Full Exception">
                <MenuItem.Icon>
                    <Image Source="/FrostyCore;component/Images/Copy.png"
                           RenderOptions.BitmapScalingMode="Fant" />
                </MenuItem.Icon>
            </MenuItem>
        </ContextMenu>
    </ctrl2:FrostyWindow.Resources>

    <Grid Background="{StaticResource ListBackground}">
        <Grid x:Name="mainGrid">
            <Grid.RowDefinitions>
                <RowDefinition Height="22" />
                <RowDefinition Height="26" />
                <RowDefinition Height="24" />
                <RowDefinition Height="*" />
                <RowDefinition Height="22" />
            </Grid.RowDefinitions>

            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Menu x:Name="menu"
                      Height="22"
                      Grid.Column="0"
                      VerticalAlignment="Top">
                    <MenuItem Header="File"
                              Height="22">
                        <MenuItem x:Name="newModMenuItem"
                                  Header="New"
                                  Height="22"
                                  InputGestureText="Ctrl+N"
                                  Click="newModMenuItem_Click">
                            <MenuItem.Icon>
                                <Image Source="/FrostyEditor;component/Images/New.png"
                                       RenderOptions.BitmapScalingMode="Fant" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem x:Name="openModMenuItem"
                                  Header="Open"
                                  Height="22"
                                  InputGestureText="Ctrl+O"
                                  Click="openModMenuItem_Click">
                            <MenuItem.Icon>
                                <Image Source="/FrostyEditor;component/Images/Open.png"
                                       RenderOptions.BitmapScalingMode="Fant" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem Name="recentProjectsMenuItem"
                                  Header="Recent Projects"
                                  Height="22">
                            <MenuItem.Icon>
                                <Image Source="/FrostyEditor;component/Images/Recent.png"
                                       RenderOptions.BitmapScalingMode="Fant" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem x:Name="saveModMenuItem"
                                  Header="Save"
                                  Height="22"
                                  InputGestureText="Ctrl+S"
                                  Click="saveModMenuItem_Click">
                            <MenuItem.Icon>
                                <Image Source="/FrostyEditor;component/Images/Save.png"
                                       RenderOptions.BitmapScalingMode="Fant" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem x:Name="saveAsModMenuItem"
                                  Header="Save As"
                                  Height="22"
                                  InputGestureText="Ctrl+Shift+S"
                                  Click="saveAsModMenuItem_Click">
                            <MenuItem.Icon>
                                <Image Source="/FrostyEditor;component/Images/SaveAs.png"
                                       RenderOptions.BitmapScalingMode="Fant" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <Separator />
                        <MenuItem x:Name="exportModMenuItem"
                                  Header="Export to Mod"
                                  Height="22"
                                  Command="{StaticResource exportModMenuItemCommand}"
                                  CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                        <Separator />
                        <MenuItem x:Name="exitMenuItem"
                                  Header="Exit"
                                  InputGestureText="Alt+F4"
                                  Height="22"
                                  Click="exitMenuItem_Click">
                            <MenuItem.Icon>
                                <Image Source="/FrostyEditor;component/Images/Exit.png"
                                       RenderOptions.BitmapScalingMode="Fant" />
                            </MenuItem.Icon>
                        </MenuItem>
                    </MenuItem>
                    <MenuItem x:Name="toolsMenuItem"
                              Header="Tools"
                              Height="22">
                    </MenuItem>
                    <MenuItem Header="Window"
                              Height="22">
                        <MenuItem x:Name="closeAllDocumentsMenuItem"
                                  Header="Close All Documents"
                                  Click="closeAllDocumentsMenuItem_Click">
                            <MenuItem.Icon>
                                <Image Source="/FrostyEditor;component/Images/CloseAll.png"
                                       RenderOptions.BitmapScalingMode="Fant" />
                            </MenuItem.Icon>
                        </MenuItem>
                    </MenuItem>
                    <MenuItem Header="Help"
                              Height="22">
                        <MenuItem x:Name="aboutMenuItem"
                                  Header="About Frosty Editor"
                                  Click="aboutMenuItem_Click" />
                    </MenuItem>
                </Menu>
            </Grid>

            <Grid Grid.Row="1"
                  Background="{StaticResource ListBackground}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <Border BorderBrush="{StaticResource ControlBackground}"
                        BorderThickness="2,0,2,0">
                    <DockPanel Margin="1,1,1,1">
                        <!-- Editor -->
                        <Border Background="{StaticResource ControlBackground}"
                                HorizontalAlignment="Left"
                                DockPanel.Dock="Left"
                                RenderOptions.EdgeMode="Aliased">
                            <StackPanel Orientation="Horizontal"
                                        Margin="6,0,6,0">
                                <Button Margin="0,0,0,0"
                                        Height="20"
                                        Width="20"
                                        ToolTip="New Project"
                                        Click="newModMenuItem_Click">
                                    <Image Source="/FrostyEditor;component/Images/New.png"
                                           Width="16" />
                                </Button>
                                <Button Margin="4,0,0,0"
                                        Height="20"
                                        Width="20"
                                        ToolTip="Open Project"
                                        Click="openModMenuItem_Click">
                                    <Image Source="/FrostyEditor;component/Images/Open.png"
                                           Width="16" />
                                </Button>
                                <Button Margin="4,0,0,0"
                                        Height="20"
                                        Width="20"
                                        ToolTip="Save Project"
                                        Click="saveModMenuItem_Click">
                                    <Image Source="/FrostyEditor;component/Images/Save.png"
                                           Width="16" />
                                </Button>
                                <Button Margin="4,0,0,0"
                                        Height="20"
                                        Width="20"
                                        ToolTip="Save Project As"
                                        Click="saveAsModMenuItem_Click">
                                    <Image Source="/FrostyEditor;component/Images/SaveAs.png"
                                           Width="16" />
                                </Button>
                                <!--<Border Width="1" Background="#D0D0D0" Margin="8,3,2,3"/>-->
                            </StackPanel>
                        </Border>
                        <!-- Toolbar -->
                        <Border Background="{StaticResource ControlBackground}"
                                Margin="1 0 0 0"
                                DockPanel.Dock="Left"
                                RenderOptions.EdgeMode="Aliased">
                            <ItemsControl x:Name="editorToolbarItems"
                                          Margin="2,1,6,1">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel IsItemsHost="True"
                                                    Orientation="Horizontal">
                                            <!-- Toolbar bindings go here -->
                                        </StackPanel>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Button Margin="4,0,0,0"
                                                Height="20"
                                                ToolTip="{Binding Path=ToolTip}"
                                                Command="{Binding Path=Command}">
                                            <StackPanel x:Name="panel"
                                                        Margin="4 0 4 0"
                                                        Orientation="Horizontal">
                                                <Image x:Name="icon"
                                                       Source="{Binding Path=Icon}"
                                                       Width="16" />
                                                <TextBlock x:Name="text"
                                                           Margin="4,0,0,0"
                                                           Text="{Binding Path=Text}" />
                                            </StackPanel>
                                        </Button>
                                        <DataTemplate.Triggers>
                                            <DataTrigger Binding="{Binding Path=Icon}"
                                                         Value="{x:Null}">
                                                <Setter Property="Visibility"
                                                        TargetName="icon"
                                                        Value="Collapsed" />
                                                <Setter Property="Margin"
                                                        TargetName="text"
                                                        Value="0" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Path=Text}"
                                                         Value="">
                                                <Setter Property="Margin"
                                                        TargetName="text"
                                                        Value="0" />
                                                <Setter Property="Margin"
                                                        TargetName="panel"
                                                        Value="0" />
                                            </DataTrigger>
                                        </DataTemplate.Triggers>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                            <Border.Style>
                                <Style TargetType="{x:Type Border}">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Path=Items.Count, ElementName=editorToolbarItems}"
                                                     Value="0">
                                            <Setter Property="Visibility"
                                                    Value="Collapsed" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                        </Border>
                        <!-- Launch -->
                        <Border Background="{StaticResource ControlBackground}"
                                Margin="1 0 0 0"
                                DockPanel.Dock="Left"
                                RenderOptions.EdgeMode="Aliased">
                            <StackPanel Orientation="Horizontal"
                                        Margin="6,2,6,2">
                                <Button x:Name="launchButton"
                                        Margin="0"
                                        Click="launchButton_Click"
                                        ToolTip="Launch game with current project"
                                        IsEnabled="false">
                                    <StackPanel Orientation="Horizontal"
                                                Margin="4 0 4 0">
                                        <Image Grid.Column="0"
                                               Source="../Images/Play.png"
                                               Width="16" />
                                        <TextBlock Grid.Column="1"
                                                   Text="Launch"
                                                   VerticalAlignment="Center"
                                                   Margin="4 0 0 0" />
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                        </Border>
                        <!-- Filler -->
                        <Border Background="Transparent"
                                Margin="1,0,0,0"
                                HorizontalAlignment="Stretch"
                                DockPanel.Dock="Left"
                                RenderOptions.EdgeMode="Aliased" />
                    </DockPanel>
                </Border>
            </Grid>

            <Border BorderBrush="{StaticResource ControlBackground}"
                    BorderThickness="2,2,2,0"
                    Grid.Row="2">
                <ctrl2:FrostyTabControl x:Name="tabControl"
                                        Margin="2,2,2,0"
                                        SelectionChanged="tabControl_SelectionChanged">
                    <ctrl2:FrostyTabControl.Style>
                        <Style TargetType="{x:Type ctrl2:FrostyTabControl}">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type ctrl2:FrostyTabControl}">
                                        <Grid x:Name="templateRoot"
                                              ClipToBounds="true"
                                              SnapsToDevicePixels="true"
                                              KeyboardNavigation.TabNavigation="Local">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition x:Name="ColumnDefinition0" />
                                                <ColumnDefinition x:Name="ColumnDefinition1"
                                                                  Width="0" />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition x:Name="RowDefinition0"
                                                               Height="Auto" />
                                                <RowDefinition x:Name="RowDefinition1"
                                                               Height="*" />
                                            </Grid.RowDefinitions>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>

                                                <ScrollViewer x:Name="PART_ScrollViewer"
                                                              IsTabStop="False"
                                                              VerticalScrollBarVisibility="Disabled"
                                                              HorizontalScrollBarVisibility="Hidden"
                                                              BorderThickness="0"
                                                              Padding="0"
                                                              Margin="0,0,0,-1">
                                                    <TabPanel x:Name="headerPanel"
                                                              Background="Transparent"
                                                              Grid.Column="0"
                                                              IsItemsHost="true"
                                                              Margin="-1,0,0,0"
                                                              Grid.Row="0"
                                                              KeyboardNavigation.TabIndex="1"
                                                              Panel.ZIndex="1" />
                                                </ScrollViewer>

                                                <Border Grid.Column="1">
                                                    <RepeatButton Content="&lt;"
                                                                  x:Name="PART_ScrollLeft"
                                                                  Width="21">
                                                        <RepeatButton.Template>
                                                            <ControlTemplate TargetType="{x:Type RepeatButton}">
                                                                <Border Background="{StaticResource ScrollbarBackground}">
                                                                    <Border x:Name="border"
                                                                            Background="{StaticResource ControlBackground}"
                                                                            Margin="1">
                                                                        <Polygon Points="0,0 3.5,3.5 3.5,-3.5"
                                                                                 Stroke="{StaticResource ButtonImage}"
                                                                                 Fill="{StaticResource ButtonImage}"
                                                                                 VerticalAlignment="Top"
                                                                                 HorizontalAlignment="Left"
                                                                                 Margin="7,10,0,0" />
                                                                    </Border>
                                                                </Border>
                                                                <ControlTemplate.Triggers>
                                                                    <Trigger Property="IsMouseOver"
                                                                             Value="True">
                                                                        <Setter Property="Background"
                                                                                TargetName="border"
                                                                                Value="{StaticResource ControlHighlight}" />
                                                                    </Trigger>
                                                                    <Trigger Property="IsPressed"
                                                                             Value="True">
                                                                        <Setter Property="Background"
                                                                                TargetName="border"
                                                                                Value="{StaticResource ControlPressed}" />
                                                                    </Trigger>
                                                                </ControlTemplate.Triggers>
                                                            </ControlTemplate>
                                                        </RepeatButton.Template>
                                                    </RepeatButton>
                                                </Border>

                                                <Border Grid.Column="2">
                                                    <RepeatButton Content="&gt;"
                                                                  x:Name="PART_ScrollRight"
                                                                  Width="21">
                                                        <RepeatButton.Template>
                                                            <ControlTemplate TargetType="{x:Type RepeatButton}">
                                                                <Border Background="{StaticResource ScrollbarBackground}">
                                                                    <Border x:Name="border"
                                                                            Background="{StaticResource ControlBackground}"
                                                                            Margin="1">
                                                                        <Polygon Points="0,0 -3.5,3.5 -3.5,-3.5"
                                                                                 Stroke="{StaticResource ButtonImage}"
                                                                                 Fill="{StaticResource ButtonImage}"
                                                                                 VerticalAlignment="Top"
                                                                                 HorizontalAlignment="Left"
                                                                                 Margin="12,10,0,0" />
                                                                    </Border>
                                                                </Border>
                                                                <ControlTemplate.Triggers>
                                                                    <Trigger Property="IsMouseOver"
                                                                             Value="True">
                                                                        <Setter Property="Background"
                                                                                TargetName="border"
                                                                                Value="{StaticResource ControlHighlight}" />
                                                                    </Trigger>
                                                                    <Trigger Property="IsPressed"
                                                                             Value="True">
                                                                        <Setter Property="Background"
                                                                                TargetName="border"
                                                                                Value="{StaticResource ControlPressed}" />
                                                                    </Trigger>
                                                                </ControlTemplate.Triggers>
                                                            </ControlTemplate>
                                                        </RepeatButton.Template>
                                                    </RepeatButton>
                                                </Border>
                                            </Grid>

                                        </Grid>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="TabStripPlacement"
                                                     Value="Bottom">
                                                <Setter Property="Grid.Row"
                                                        TargetName="headerPanel"
                                                        Value="1" />
                                                <!--<Setter Property="Grid.Row" TargetName="contentPanel" Value="0"/>-->
                                                <Setter Property="Height"
                                                        TargetName="RowDefinition0"
                                                        Value="*" />
                                                <Setter Property="Height"
                                                        TargetName="RowDefinition1"
                                                        Value="Auto" />
                                                <Setter Property="Margin"
                                                        TargetName="headerPanel"
                                                        Value="2,0,2,2" />
                                            </Trigger>
                                            <Trigger Property="TabStripPlacement"
                                                     Value="Left">
                                                <Setter Property="Grid.Row"
                                                        TargetName="headerPanel"
                                                        Value="0" />
                                                <Setter Property="Grid.Column"
                                                        TargetName="headerPanel"
                                                        Value="0" />
                                                <Setter Property="Width"
                                                        TargetName="ColumnDefinition0"
                                                        Value="Auto" />
                                                <Setter Property="Width"
                                                        TargetName="ColumnDefinition1"
                                                        Value="*" />
                                                <Setter Property="Height"
                                                        TargetName="RowDefinition0"
                                                        Value="*" />
                                                <Setter Property="Height"
                                                        TargetName="RowDefinition1"
                                                        Value="0" />
                                                <Setter Property="Margin"
                                                        TargetName="headerPanel"
                                                        Value="2,2,0,2" />
                                            </Trigger>
                                            <Trigger Property="TabStripPlacement"
                                                     Value="Right">
                                                <Setter Property="Grid.Row"
                                                        TargetName="headerPanel"
                                                        Value="0" />
                                                <Setter Property="Grid.Column"
                                                        TargetName="headerPanel"
                                                        Value="1" />
                                                <Setter Property="Width"
                                                        TargetName="ColumnDefinition0"
                                                        Value="*" />
                                                <Setter Property="Width"
                                                        TargetName="ColumnDefinition1"
                                                        Value="Auto" />
                                                <Setter Property="Height"
                                                        TargetName="RowDefinition0"
                                                        Value="*" />
                                                <Setter Property="Height"
                                                        TargetName="RowDefinition1"
                                                        Value="0" />
                                                <Setter Property="Margin"
                                                        TargetName="headerPanel"
                                                        Value="0,2,2,2" />
                                            </Trigger>
                                            <Trigger Property="IsEnabled"
                                                     Value="false">
                                                <Setter Property="TextElement.Foreground"
                                                        TargetName="templateRoot"
                                                        Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}" />
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </ctrl2:FrostyTabControl.Style>
                    <ctrl2:FrostyTabControl.Resources>
                        <Style TargetType="ctrl2:FrostyTabItem">
                            <Setter Property="AllowDrop"
                                    Value="True" />
                            <EventSetter Event="MouseMove"
                                         Handler="TabItem_MouseMove" />
                            <EventSetter Event="DragOver"
                                         Handler="TabItem_Move" />
                        </Style>
                    </ctrl2:FrostyTabControl.Resources>
                    <ctrl2:FrostyTabItem Header="Home Page"
                                         CloseButtonVisible="False"
                                         Icon="/FrostyEditor;component/Images/Home.png">
                        <Grid Background="{StaticResource ControlBackground}">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="64" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>

                            <!-- Multiplayer Warning -->
                            <Grid Margin="2"
                                  Background="{StaticResource ListBackground}">
                                <Grid Grid.Row="0"
                                      Margin="5">
                                    <Image Source="/FrostyEditor;component/Images/Warning.png"
                                           Width="32"
                                           HorizontalAlignment="Left"
                                           Margin="20,0,0,0"
                                           VerticalAlignment="Center" />
                                    <TextBlock Text="The developers do not support this tool being used to modify files that impact multiplayer in any way shape or form, and will not provide support to anyone who attempts this."
                                               Foreground="{StaticResource FontColor}"
                                               VerticalAlignment="Center"
                                               HorizontalAlignment="Left"
                                               TextWrapping="Wrap"
                                               TextAlignment="Left"
                                               Margin="80,0,50,0" />
                                </Grid>
                            </Grid>

                            <Grid Grid.Row="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <!-- Loaded Plugins / Convenient Links -->
                                <Grid Grid.Column="0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="1*" />
                                        <RowDefinition Height="2*" />
                                    </Grid.RowDefinitions>

                                    <Grid Grid.Row="0"
                                          Margin="2"
                                          Background="{StaticResource ListBackground}">
                                        <ScrollViewer Grid.Row="0"
                                                      HorizontalScrollBarVisibility="Auto"
                                                      VerticalScrollBarVisibility="Auto"
                                                      Padding="4">
                                            <StackPanel Orientation="Vertical">
                                                <TextBlock Text="Convenient Links"
                                                           Foreground="{StaticResource FontColor}"
                                                           Margin="8"
                                                           FontWeight="Bold" />
                                                <StackPanel Orientation="Horizontal"
                                                            Margin="8,8,0,0">
                                                    <TextBlock Text="Frosty Website:"
                                                               Foreground="{StaticResource FontColor}"
                                                               Margin="0,0,20,0" />
                                                    <TextBlock>
                                                    <Hyperlink NavigateUri="http://www.frostytoolsuite.com"
                                                               Foreground="{StaticResource FontColor}"
                                                               RequestNavigate="hyperlink_RequestNavigate">
                                                        http://www.frostytoolsuite.com
                                                    </Hyperlink>
                                                    </TextBlock>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal"
                                                            Margin="8,8,0,0">
                                                    <TextBlock Text="Frosty Support:"
                                                               Foreground="{StaticResource FontColor}"
                                                               Margin="0,0,20,0" />
                                                    <TextBlock>
                                                    <Hyperlink NavigateUri="https://discord.gg/sB8ZUAT"
                                                               Foreground="{StaticResource FontColor}"
                                                               RequestNavigate="hyperlink_RequestNavigate">
                                                        https://discord.gg/sB8ZUAT
                                                    </Hyperlink>
                                                    </TextBlock>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal"
                                                            Margin="8,8,0,0">
                                                    <TextBlock Text="Frosty Source Code:"
                                                               Foreground="{StaticResource FontColor}"
                                                               Margin="0,0,20,0" />
                                                    <TextBlock>
                                                    <Hyperlink NavigateUri="https://github.com/CadeEvs/FrostyToolsuite"
                                                               Foreground="{StaticResource FontColor}"
                                                               RequestNavigate="hyperlink_RequestNavigate">
                                                        https://github.com/CadeEvs/FrostyToolsuite
                                                    </Hyperlink>
                                                    </TextBlock>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal"
                                                            Margin="8,8,0,0">
                                                    <TextBlock Text="Intel® Texture Works Plugin for Photoshop:"
                                                               Foreground="{StaticResource FontColor}"
                                                               Margin="0,0,20,0" />
                                                    <TextBlock>
                                                    <Hyperlink NavigateUri="https://software.intel.com/en-us/articles/intel-texture-works-plugin"
                                                               Foreground="{StaticResource FontColor}"
                                                               RequestNavigate="hyperlink_RequestNavigate">
                                                        https://software.intel.com/en-us/articles/intel-texture-works-plugin
                                                    </Hyperlink>
                                                    </TextBlock>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal"
                                                            Margin="8,8,0,0">
                                                    <TextBlock Text="GPUOpen-Tools/Compressonator:"
                                                               Foreground="{StaticResource FontColor}"
                                                               Margin="0,0,20,0" />
                                                    <TextBlock>
                                                    <Hyperlink NavigateUri="https://github.com/GPUOpen-Tools/Compressonator/releases"
                                                               Foreground="{StaticResource FontColor}"
                                                               RequestNavigate="hyperlink_RequestNavigate">
                                                        https://github.com/GPUOpen-Tools/Compressonator/releases
                                                    </Hyperlink>
                                                    </TextBlock>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal"
                                                            Margin="8,8,0,0">
                                                    <TextBlock Text="DirectX Texture Library:"
                                                               Foreground="{StaticResource FontColor}"
                                                               Margin="0,0,20,0" />
                                                    <TextBlock>
                                                    <Hyperlink NavigateUri="https://github.com/Microsoft/DirectXTex/releases"
                                                               Foreground="{StaticResource FontColor}"
                                                               RequestNavigate="hyperlink_RequestNavigate">
                                                        https://github.com/Microsoft/DirectXTex/releases
                                                    </Hyperlink>
                                                    </TextBlock>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal"
                                                            Margin="8,8,0,0">
                                                    <TextBlock Text="DirectX End-User Runtime Web Installer:"
                                                               Foreground="{StaticResource FontColor}"
                                                               Margin="0,0,20,0" />
                                                    <TextBlock>
                                                    <Hyperlink NavigateUri="https://www.microsoft.com/en-au/download/details.aspx?id=35"
                                                               Foreground="{StaticResource FontColor}"
                                                               RequestNavigate="hyperlink_RequestNavigate">
                                                        https://www.microsoft.com/en-au/download/details.aspx?id=35
                                                    </Hyperlink>
                                                    </TextBlock>
                                                </StackPanel>
                                            </StackPanel>
                                        </ScrollViewer>
                                    </Grid>
                                    <GridSplitter Grid.Row="1"
                                                  Background="Transparent"
                                                  Height="3"
                                                  HorizontalAlignment="Stretch"
                                                  VerticalAlignment="Top" />
                                    <Grid Grid.Row="1"
                                          Margin="2"
                                          Background="{StaticResource ListBackground}">
                                        <ListView x:Name="LoadedPluginsList">
                                            <ListView.View>
                                                <ctrl2:FrostyAutoSizedGridView>
                                                    <GridView.Columns>
                                                        <GridViewColumn Header="Name">
                                                            <GridViewColumn.CellTemplate>
                                                                <DataTemplate>
                                                                    <StackPanel Orientation="Horizontal"
                                                                                Height="24">
                                                                        <TextBlock Text="{Binding Path=Name}"
                                                                                   VerticalAlignment="Center" />
                                                                    </StackPanel>
                                                                </DataTemplate>
                                                            </GridViewColumn.CellTemplate>
                                                        </GridViewColumn>
                                                        <GridViewColumn Header="Author">
                                                            <GridViewColumn.CellTemplate>
                                                                <DataTemplate>
                                                                    <StackPanel Orientation="Horizontal"
                                                                                Height="24">
                                                                        <TextBlock Text="{Binding Path=Author}"
                                                                                   VerticalAlignment="Center" />
                                                                    </StackPanel>
                                                                </DataTemplate>
                                                            </GridViewColumn.CellTemplate>
                                                        </GridViewColumn>
                                                        <GridViewColumn Header="Version">
                                                            <GridViewColumn.CellTemplate>
                                                                <DataTemplate>
                                                                    <StackPanel Orientation="Horizontal"
                                                                                Height="24">
                                                                        <TextBlock Text="{Binding Path=Version}"
                                                                                   VerticalAlignment="Center" />
                                                                    </StackPanel>
                                                                </DataTemplate>
                                                            </GridViewColumn.CellTemplate>
                                                        </GridViewColumn>
                                                        <GridViewColumn Header="Status">
                                                            <GridViewColumn.CellTemplate>
                                                                <DataTemplate>
                                                                    <StackPanel Orientation="Horizontal"
                                                                                Height="24"
                                                                                HorizontalAlignment="Center">
                                                                        <Path Name="statusIcon"
                                                                              Fill="{StaticResource FontColor}"
                                                                              Margin="3"
                                                                              Stretch="Uniform" />
                                                                    </StackPanel>
                                                                    <DataTemplate.Triggers>
                                                                        <!-- Failure. -->
                                                                        <DataTrigger Binding="{Binding Path=Status}"
                                                                                     Value="{x:Static coreroot:PluginLoadStatus.Failed}">
                                                                            <Setter Property="ContextMenu"
                                                                                    TargetName="statusIcon"
                                                                                    Value="{StaticResource pluginStatusImageContextMenu}" />
                                                                            <Setter Property="Data"
                                                                                    TargetName="statusIcon"
                                                                                    Value="{Binding Path=Data, Source={StaticResource RemoveButtonIcon}}" />
                                                                            <Setter Property="ToolTip"
                                                                                    TargetName="statusIcon"
                                                                                    Value="This plugin has failed to load. You may use the context menu of this image to copy the full exception." />
                                                                        </DataTrigger>

                                                                        <!-- Successfully loaded. -->
                                                                        <DataTrigger Binding="{Binding Path=Status}"
                                                                                     Value="{x:Static coreroot:PluginLoadStatus.Loaded}">
                                                                            <Setter Property="Data"
                                                                                    TargetName="statusIcon"
                                                                                    Value="{StaticResource CheckmarkIcon}" />
                                                                            <Setter Property="ToolTip"
                                                                                    TargetName="statusIcon"
                                                                                    Value="This plugin has successfully loaded." />
                                                                        </DataTrigger>

                                                                        <!-- Successfully loaded, but invalid for the current profile. -->
                                                                        <DataTrigger Binding="{Binding Path=Status}"
                                                                                     Value="{x:Static coreroot:PluginLoadStatus.LoadedInvalid}">
                                                                            <Setter Property="Data"
                                                                                    TargetName="statusIcon"
                                                                                    Value="{StaticResource ExclamationIcon}" />
                                                                            <Setter Property="ToolTip"
                                                                                    TargetName="statusIcon"
                                                                                    Value="This plugin has successfully loaded, but its features are unavailable for the selected profile." />
                                                                        </DataTrigger>
                                                                    </DataTemplate.Triggers>
                                                                </DataTemplate>
                                                            </GridViewColumn.CellTemplate>
                                                        </GridViewColumn>
                                                    </GridView.Columns>
                                                </ctrl2:FrostyAutoSizedGridView>
                                            </ListView.View>
                                        </ListView>

                                        <TextBlock HorizontalAlignment="Right"
                                                   Margin="0,2.5,28,0"
                                                   Text="{Binding Path=Items.Count, ElementName=LoadedPluginsList, StringFormat='{}{0:N0} plugin(s)'}"
                                                   VerticalAlignment="Top" />
                                    </Grid>
                                </Grid>

                                <GridSplitter HorizontalAlignment="Right"
                                              VerticalAlignment="Stretch"
                                              Width="3"
                                              Background="Transparent" />

                                <!-- Changelog -->
                                <Grid Grid.Column="1"
                                      Margin="2"
                                      Background="{StaticResource ListBackground}">
                                    <ScrollViewer  HorizontalScrollBarVisibility="Disabled"
                                                   VerticalScrollBarVisibility="Auto"
                                                   Padding="4">
                                        <StackPanel Orientation="Vertical">
                                            <TextBlock Text="Change Log"
                                                       Foreground="{StaticResource FontColor}"
                                                       Margin="8"
                                                       FontWeight="Bold" />
                                            <StackPanel Orientation="Vertical"
                                                        Margin="8,8,0,0">
                                                <TextBlock x:Name="changeLogTextBlock"
                                                           Foreground="{StaticResource FontColor}"
                                                           Text="{ext:Text 'ChangeLog.txt'}"
                                                           FontFamily="Consolas"
                                                           TextWrapping="Wrap"
                                                           Margin="0,0,8,0" />
                                            </StackPanel>
                                        </StackPanel>
                                    </ScrollViewer>
                                </Grid>
                            </Grid>
                        </Grid>
                    </ctrl2:FrostyTabItem>
                </ctrl2:FrostyTabControl>
            </Border>

            <Grid Grid.Row="3">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="400" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <Border Background="{StaticResource ControlBackground}"
                        Grid.Column="0">
                    <Grid Margin="2"
                          Background="{StaticResource ListBackground}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="5*" />
                            <ColumnDefinition Width="13*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="33" />
                            <RowDefinition Height="3*" />
                        </Grid.RowDefinitions>

                        <ctrl2:FrostyTabControl x:Name="explorerTabControl"
                                                Grid.ColumnSpan="2"
                                                SelectionChanged="explorerTabControl_SelectionChanged">
                            <ctrl2:FrostyTabControl.Style>
                                <Style TargetType="{x:Type ctrl2:FrostyTabControl}">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="{x:Type ctrl2:FrostyTabControl}">
                                                <Grid x:Name="templateRoot"
                                                      ClipToBounds="true"
                                                      SnapsToDevicePixels="true"
                                                      KeyboardNavigation.TabNavigation="Local">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition x:Name="ColumnDefinition0" />
                                                        <ColumnDefinition x:Name="ColumnDefinition1"
                                                                          Width="0" />
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition x:Name="RowDefinition0"
                                                                       Height="Auto" />
                                                        <RowDefinition x:Name="RowDefinition1"
                                                                       Height="*" />
                                                    </Grid.RowDefinitions>

                                                    <StackPanel>
                                                        <!-- Dockable Window Deco -->
                                                        <StackPanel x:Name="DockableBar"
                                                                    Height="13">
                                                            <Border Background="#232323"
                                                                    Height="11" />
                                                            <Border Background="#1a1a1a"
                                                                    Height="1" />
                                                            <Border Background="#2f2f2f"
                                                                    Height="1" />
                                                        </StackPanel>

                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="14" />
                                                                <ColumnDefinition Width="*" />
                                                                <ColumnDefinition Width="Auto" />
                                                                <ColumnDefinition Width="Auto" />
                                                            </Grid.ColumnDefinitions>

                                                            <Grid Width="14"
                                                                  Height="20">
                                                                <Border Background="#292929" />
                                                                <Path x:Name="dockingDeco"
                                                                      Data="{Binding Source={StaticResource DockingDeco}, Path=Data}"
                                                                      Height="20"
                                                                      Width="14"
                                                                      Fill="#454545"
                                                                      Margin="0,0,0,0"
                                                                      RenderTransformOrigin="0.5,0.5">
                                                                    <Path.RenderTransform>
                                                                        <TransformGroup>
                                                                            <ScaleTransform />
                                                                            <SkewTransform />
                                                                            <RotateTransform />
                                                                            <TranslateTransform Y="-1" />
                                                                        </TransformGroup>
                                                                    </Path.RenderTransform>
                                                                </Path>
                                                            </Grid>

                                                            <ScrollViewer x:Name="PART_ScrollViewer"
                                                                          Grid.Column="1"
                                                                          IsTabStop="False"
                                                                          VerticalScrollBarVisibility="Disabled"
                                                                          HorizontalScrollBarVisibility="Hidden"
                                                                          BorderThickness="0"
                                                                          Padding="0"
                                                                          Margin="0,0,0,-1">
                                                                <TabPanel x:Name="headerPanel"
                                                                          Background="Transparent"
                                                                          Grid.Column="0"
                                                                          IsItemsHost="true"
                                                                          Margin="-1,0,0,0"
                                                                          Grid.Row="0"
                                                                          KeyboardNavigation.TabIndex="1"
                                                                          Panel.ZIndex="1" />
                                                            </ScrollViewer>

                                                            <Border Grid.Column="2">
                                                                <RepeatButton Content="&lt;"
                                                                              x:Name="PART_ScrollLeft"
                                                                              Width="21">
                                                                    <RepeatButton.Template>
                                                                        <ControlTemplate TargetType="{x:Type RepeatButton}">
                                                                            <Border Background="{StaticResource ScrollbarBackground}">
                                                                                <Border x:Name="border"
                                                                                        Background="{StaticResource ControlBackground}"
                                                                                        Margin="1">
                                                                                    <Polygon Points="0,0 3.5,3.5 3.5,-3.5"
                                                                                             Stroke="{StaticResource ButtonImage}"
                                                                                             Fill="{StaticResource ButtonImage}"
                                                                                             VerticalAlignment="Top"
                                                                                             HorizontalAlignment="Left"
                                                                                             Margin="7,10,0,0" />
                                                                                </Border>
                                                                            </Border>
                                                                            <ControlTemplate.Triggers>
                                                                                <Trigger Property="IsMouseOver"
                                                                                         Value="True">
                                                                                    <Setter Property="Background"
                                                                                            TargetName="border"
                                                                                            Value="{StaticResource ControlHighlight}" />
                                                                                </Trigger>
                                                                                <Trigger Property="IsPressed"
                                                                                         Value="True">
                                                                                    <Setter Property="Background"
                                                                                            TargetName="border"
                                                                                            Value="{StaticResource ControlPressed}" />
                                                                                </Trigger>
                                                                            </ControlTemplate.Triggers>
                                                                        </ControlTemplate>
                                                                    </RepeatButton.Template>
                                                                </RepeatButton>
                                                            </Border>

                                                            <Border Grid.Column="3">
                                                                <RepeatButton Content="&gt;"
                                                                              x:Name="PART_ScrollRight"
                                                                              Width="21">
                                                                    <RepeatButton.Template>
                                                                        <ControlTemplate TargetType="{x:Type RepeatButton}">
                                                                            <Border Background="{StaticResource ScrollbarBackground}">
                                                                                <Border x:Name="border"
                                                                                        Background="{StaticResource ControlBackground}"
                                                                                        Margin="1">
                                                                                    <Polygon Points="0,0 -3.5,3.5 -3.5,-3.5"
                                                                                             Stroke="{StaticResource ButtonImage}"
                                                                                             Fill="{StaticResource ButtonImage}"
                                                                                             VerticalAlignment="Top"
                                                                                             HorizontalAlignment="Left"
                                                                                             Margin="12,10,0,0" />
                                                                                </Border>
                                                                            </Border>
                                                                            <ControlTemplate.Triggers>
                                                                                <Trigger Property="IsMouseOver"
                                                                                         Value="True">
                                                                                    <Setter Property="Background"
                                                                                            TargetName="border"
                                                                                            Value="{StaticResource ControlHighlight}" />
                                                                                </Trigger>
                                                                                <Trigger Property="IsPressed"
                                                                                         Value="True">
                                                                                    <Setter Property="Background"
                                                                                            TargetName="border"
                                                                                            Value="{StaticResource ControlPressed}" />
                                                                                </Trigger>
                                                                            </ControlTemplate.Triggers>
                                                                        </ControlTemplate>
                                                                    </RepeatButton.Template>
                                                                </RepeatButton>
                                                            </Border>
                                                        </Grid>
                                                    </StackPanel>
                                                </Grid>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="TabStripPlacement"
                                                             Value="Bottom">
                                                        <Setter Property="Grid.Row"
                                                                TargetName="headerPanel"
                                                                Value="1" />
                                                        <!--<Setter Property="Grid.Row" TargetName="contentPanel" Value="0"/>-->
                                                        <Setter Property="Height"
                                                                TargetName="RowDefinition0"
                                                                Value="*" />
                                                        <Setter Property="Height"
                                                                TargetName="RowDefinition1"
                                                                Value="Auto" />
                                                        <Setter Property="Margin"
                                                                TargetName="headerPanel"
                                                                Value="2,0,2,2" />
                                                    </Trigger>
                                                    <Trigger Property="TabStripPlacement"
                                                             Value="Left">
                                                        <Setter Property="Grid.Row"
                                                                TargetName="headerPanel"
                                                                Value="0" />
                                                        <Setter Property="Grid.Column"
                                                                TargetName="headerPanel"
                                                                Value="0" />
                                                        <Setter Property="Width"
                                                                TargetName="ColumnDefinition0"
                                                                Value="Auto" />
                                                        <Setter Property="Width"
                                                                TargetName="ColumnDefinition1"
                                                                Value="*" />
                                                        <Setter Property="Height"
                                                                TargetName="RowDefinition0"
                                                                Value="*" />
                                                        <Setter Property="Height"
                                                                TargetName="RowDefinition1"
                                                                Value="0" />
                                                        <Setter Property="Margin"
                                                                TargetName="headerPanel"
                                                                Value="2,2,0,2" />
                                                    </Trigger>
                                                    <Trigger Property="TabStripPlacement"
                                                             Value="Right">
                                                        <Setter Property="Grid.Row"
                                                                TargetName="headerPanel"
                                                                Value="0" />
                                                        <Setter Property="Grid.Column"
                                                                TargetName="headerPanel"
                                                                Value="1" />
                                                        <Setter Property="Width"
                                                                TargetName="ColumnDefinition0"
                                                                Value="*" />
                                                        <Setter Property="Width"
                                                                TargetName="ColumnDefinition1"
                                                                Value="Auto" />
                                                        <Setter Property="Height"
                                                                TargetName="RowDefinition0"
                                                                Value="*" />
                                                        <Setter Property="Height"
                                                                TargetName="RowDefinition1"
                                                                Value="0" />
                                                        <Setter Property="Margin"
                                                                TargetName="headerPanel"
                                                                Value="0,2,2,2" />
                                                    </Trigger>
                                                    <Trigger Property="IsEnabled"
                                                             Value="false">
                                                        <Setter Property="TextElement.Foreground"
                                                                TargetName="templateRoot"
                                                                Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}" />
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </ctrl2:FrostyTabControl.Style>

                            <ctrl2:FrostyTabItem x:Name="dataExplorerTabItem"
                                                 Icon="/FrostyEditor;component/Images/Database.png"
                                                 Header="Data Explorer"
                                                 CloseButtonVisible="False">
                                <Border BorderBrush="{StaticResource ControlBackground}"
                                        BorderThickness="0,2,0,0">
                                    <core:FrostyDataExplorer x:Name="dataExplorer"
                                                             SelectedAssetDoubleClick="dataExplorer_SelectedAssetDoubleClick"
                                                             SelectionChanged="dataExplorer_SelectionChanged"
                                                             BookmarkContext="Asset Bookmarks">
                                        <core:FrostyDataExplorer.AssetContextMenu>
                                            <ContextMenu>
                                                <MenuItem Header="Open"
                                                          Click="contextMenuOpen_Click">
                                                    <MenuItem.Icon>
                                                        <Image Source="/FrostyEditor;component/Images/OpenAsset.png"
                                                               RenderOptions.BitmapScalingMode="Fant" />
                                                    </MenuItem.Icon>
                                                </MenuItem>
                                                <MenuItem Header="Revert"
                                                          Click="contextMenuRevert_Click">
                                                    <MenuItem.Icon>
                                                        <Image Source="/FrostyEditor;component/Images/Revert.png"
                                                               RenderOptions.BitmapScalingMode="Fant" />
                                                    </MenuItem.Icon>
                                                </MenuItem>
                                                <MenuItem Header="Export"
                                                          Click="contextMenuExportEbx_Click">
                                                    <MenuItem.Icon>
                                                        <Image Source="/FrostyEditor;component/Images/Export.png"
                                                               RenderOptions.BitmapScalingMode="Fant" />
                                                    </MenuItem.Icon>
                                                </MenuItem>
                                                <MenuItem Header="Import"
                                                          Click="contextMenuImportEbx_Click">
                                                    <MenuItem.Icon>
                                                        <Image Source="/FrostyEditor;component/Images/Import.png"
                                                               RenderOptions.BitmapScalingMode="Fant" />
                                                    </MenuItem.Icon>
                                                </MenuItem>
                                            </ContextMenu>
                                        </core:FrostyDataExplorer.AssetContextMenu>
                                    </core:FrostyDataExplorer>
                                </Border>
                            </ctrl2:FrostyTabItem>
                            <ctrl2:FrostyTabItem x:Name="legacyExplorerTabItem"
                                                 Icon="/FrostyEditor;component/Images/Database.png"
                                                 Header="Legacy Explorer"
                                                 CloseButtonVisible="False"
                                                 Visibility="Collapsed">
                                <Border BorderBrush="{StaticResource ControlBackground}"
                                        BorderThickness="0,2,0,0">
                                    <core:FrostyDataExplorer x:Name="legacyExplorer"
                                                             SelectedAssetDoubleClick="dataExplorer_SelectedAssetDoubleClick"
                                                             MultiSelect="True"
                                                             BookmarkContext="Legacy Bookmarks">
                                        <core:FrostyDataExplorer.AssetContextMenu>
                                            <ContextMenu>
                                                <MenuItem Header="Open"
                                                          Click="contextMenuOpen_Click">
                                                    <MenuItem.Icon>
                                                        <Image Source="/FrostyEditor;component/Images/OpenAsset.png"
                                                               RenderOptions.BitmapScalingMode="Fant" />
                                                    </MenuItem.Icon>
                                                </MenuItem>
                                                <MenuItem Header="Revert"
                                                          Click="contextMenuRevert_Click">
                                                    <MenuItem.Icon>
                                                        <Image Source="/FrostyEditor;component/Images/Revert.png"
                                                               RenderOptions.BitmapScalingMode="Fant" />
                                                    </MenuItem.Icon>
                                                </MenuItem>
                                                <MenuItem Header="Export"
                                                          Click="contextMenuExportAsset_Click">
                                                    <MenuItem.Icon>
                                                        <Image Source="/FrostyEditor;component/Images/Export.png"
                                                               RenderOptions.BitmapScalingMode="Fant" />
                                                    </MenuItem.Icon>
                                                </MenuItem>
                                                <MenuItem Header="Import"
                                                          Click="contextMenuImportAsset_Click">
                                                    <MenuItem.Icon>
                                                        <Image Source="/FrostyEditor;component/Images/Import.png"
                                                               RenderOptions.BitmapScalingMode="Fant" />
                                                    </MenuItem.Icon>
                                                </MenuItem>
                                            </ContextMenu>
                                        </core:FrostyDataExplorer.AssetContextMenu>
                                    </core:FrostyDataExplorer>
                                </Border>
                            </ctrl2:FrostyTabItem>
                        </ctrl2:FrostyTabControl>

                        <ctrl2:FrostyDetachedTabControl Grid.Row="1"
                                                        x:Name="explorerTabContent"
                                                        Foreground="{StaticResource FontColor}"
                                                        Grid.ColumnSpan="2" />
                    </Grid>
                </Border>

                <GridSplitter Margin="0,0,0,0"
                              VerticalAlignment="Stretch"
                              Width="3"
                              ResizeDirection="Columns"
                              Background="#00000000" />

                <Grid Grid.Column="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="3*" />
                        <RowDefinition Height="1*" />
                    </Grid.RowDefinitions>

                    <ctrl2:FrostyDetachedTabControl x:Name="tabContent"
                                                    Foreground="{StaticResource FontColor}" />

                    <GridSplitter Grid.Row="0"
                                  Margin="0"
                                  VerticalAlignment="Bottom"
                                  HorizontalAlignment="Stretch"
                                  Height="3"
                                  ResizeDirection="Rows"
                                  Background="#00000000" />

                    <Border Grid.Row="1"
                            Background="{StaticResource ControlBackground}"
                            RenderOptions.EdgeMode="Aliased">
                        <Grid Margin="2"
                              Background="{StaticResource ListBackground}">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="33" />
                                <RowDefinition Height="3*" />
                            </Grid.RowDefinitions>

                            <ctrl2:FrostyTabControl x:Name="miscTabControl"
                                                    SelectionChanged="MiscTabControl_SelectionChanged">
                                <ctrl2:FrostyTabControl.Style>
                                    <Style TargetType="{x:Type ctrl2:FrostyTabControl}">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="{x:Type ctrl2:FrostyTabControl}">
                                                    <Grid x:Name="templateRoot"
                                                          ClipToBounds="true"
                                                          SnapsToDevicePixels="true"
                                                          KeyboardNavigation.TabNavigation="Local">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition x:Name="ColumnDefinition0" />
                                                            <ColumnDefinition x:Name="ColumnDefinition1"
                                                                              Width="0" />
                                                        </Grid.ColumnDefinitions>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition x:Name="RowDefinition0"
                                                                           Height="Auto" />
                                                            <RowDefinition x:Name="RowDefinition1"
                                                                           Height="*" />
                                                        </Grid.RowDefinitions>

                                                        <StackPanel>
                                                            <!-- Dockable Window Deco -->
                                                            <StackPanel x:Name="DockableBar"
                                                                        Height="13">
                                                                <Border Background="#232323"
                                                                        Height="11" />
                                                                <Border Background="#1a1a1a"
                                                                        Height="2" />
                                                                <Border Background="#2f2f2f"
                                                                        Height="1" />
                                                            </StackPanel>

                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="14" />
                                                                    <ColumnDefinition Width="*" />
                                                                    <ColumnDefinition Width="Auto" />
                                                                    <ColumnDefinition Width="Auto" />
                                                                </Grid.ColumnDefinitions>

                                                                <Grid Width="14"
                                                                      Height="20">
                                                                    <Border Background="#292929" />
                                                                    <Path x:Name="dockingDeco"
                                                                          Data="{Binding Source={StaticResource DockingDeco}, Path=Data}"
                                                                          Height="20"
                                                                          Width="14"
                                                                          Fill="#454545"
                                                                          Margin="0,0,0,0"
                                                                          RenderTransformOrigin="0.5,0.5">
                                                                        <Path.RenderTransform>
                                                                            <TransformGroup>
                                                                                <ScaleTransform />
                                                                                <SkewTransform />
                                                                                <RotateTransform />
                                                                                <TranslateTransform Y="-1" />
                                                                            </TransformGroup>
                                                                        </Path.RenderTransform>
                                                                    </Path>
                                                                </Grid>

                                                                <ScrollViewer x:Name="PART_ScrollViewer"
                                                                              Grid.Column="1"
                                                                              IsTabStop="False"
                                                                              VerticalScrollBarVisibility="Disabled"
                                                                              HorizontalScrollBarVisibility="Hidden"
                                                                              BorderThickness="0"
                                                                              Padding="0"
                                                                              Margin="0,0,0,-1">
                                                                    <TabPanel x:Name="headerPanel"
                                                                              Background="Transparent"
                                                                              Grid.Column="0"
                                                                              IsItemsHost="true"
                                                                              Margin="-1,0,0,0"
                                                                              Grid.Row="0"
                                                                              KeyboardNavigation.TabIndex="1"
                                                                              Panel.ZIndex="1" />
                                                                </ScrollViewer>

                                                                <Border Grid.Column="2">
                                                                    <RepeatButton Content="&lt;"
                                                                                  x:Name="PART_ScrollLeft"
                                                                                  Width="21">
                                                                        <RepeatButton.Template>
                                                                            <ControlTemplate TargetType="{x:Type RepeatButton}">
                                                                                <Border Background="{StaticResource ScrollbarBackground}">
                                                                                    <Border x:Name="border"
                                                                                            Background="{StaticResource ControlBackground}"
                                                                                            Margin="1">
                                                                                        <Polygon Points="0,0 3.5,3.5 3.5,-3.5"
                                                                                                 Stroke="{StaticResource ButtonImage}"
                                                                                                 Fill="{StaticResource ButtonImage}"
                                                                                                 VerticalAlignment="Top"
                                                                                                 HorizontalAlignment="Left"
                                                                                                 Margin="7,10,0,0" />
                                                                                    </Border>
                                                                                </Border>
                                                                                <ControlTemplate.Triggers>
                                                                                    <Trigger Property="IsMouseOver"
                                                                                             Value="True">
                                                                                        <Setter Property="Background"
                                                                                                TargetName="border"
                                                                                                Value="{StaticResource ControlHighlight}" />
                                                                                    </Trigger>
                                                                                    <Trigger Property="IsPressed"
                                                                                             Value="True">
                                                                                        <Setter Property="Background"
                                                                                                TargetName="border"
                                                                                                Value="{StaticResource ControlPressed}" />
                                                                                    </Trigger>
                                                                                </ControlTemplate.Triggers>
                                                                            </ControlTemplate>
                                                                        </RepeatButton.Template>
                                                                    </RepeatButton>
                                                                </Border>

                                                                <Border Grid.Column="3">
                                                                    <RepeatButton Content="&gt;"
                                                                                  x:Name="PART_ScrollRight"
                                                                                  Width="21">
                                                                        <RepeatButton.Template>
                                                                            <ControlTemplate TargetType="{x:Type RepeatButton}">
                                                                                <Border Background="{StaticResource ScrollbarBackground}">
                                                                                    <Border x:Name="border"
                                                                                            Background="{StaticResource ControlBackground}"
                                                                                            Margin="1">
                                                                                        <Polygon Points="0,0 -3.5,3.5 -3.5,-3.5"
                                                                                                 Stroke="{StaticResource ButtonImage}"
                                                                                                 Fill="{StaticResource ButtonImage}"
                                                                                                 VerticalAlignment="Top"
                                                                                                 HorizontalAlignment="Left"
                                                                                                 Margin="12,10,0,0" />
                                                                                    </Border>
                                                                                </Border>
                                                                                <ControlTemplate.Triggers>
                                                                                    <Trigger Property="IsMouseOver"
                                                                                             Value="True">
                                                                                        <Setter Property="Background"
                                                                                                TargetName="border"
                                                                                                Value="{StaticResource ControlHighlight}" />
                                                                                    </Trigger>
                                                                                    <Trigger Property="IsPressed"
                                                                                             Value="True">
                                                                                        <Setter Property="Background"
                                                                                                TargetName="border"
                                                                                                Value="{StaticResource ControlPressed}" />
                                                                                    </Trigger>
                                                                                </ControlTemplate.Triggers>
                                                                            </ControlTemplate>
                                                                        </RepeatButton.Template>
                                                                    </RepeatButton>
                                                                </Border>
                                                            </Grid>
                                                        </StackPanel>
                                                    </Grid>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="TabStripPlacement"
                                                                 Value="Bottom">
                                                            <Setter Property="Grid.Row"
                                                                    TargetName="headerPanel"
                                                                    Value="1" />
                                                            <!--<Setter Property="Grid.Row" TargetName="contentPanel" Value="0"/>-->
                                                            <Setter Property="Height"
                                                                    TargetName="RowDefinition0"
                                                                    Value="*" />
                                                            <Setter Property="Height"
                                                                    TargetName="RowDefinition1"
                                                                    Value="Auto" />
                                                            <Setter Property="Margin"
                                                                    TargetName="headerPanel"
                                                                    Value="2,0,2,2" />
                                                        </Trigger>
                                                        <Trigger Property="TabStripPlacement"
                                                                 Value="Left">
                                                            <Setter Property="Grid.Row"
                                                                    TargetName="headerPanel"
                                                                    Value="0" />
                                                            <Setter Property="Grid.Column"
                                                                    TargetName="headerPanel"
                                                                    Value="0" />
                                                            <Setter Property="Width"
                                                                    TargetName="ColumnDefinition0"
                                                                    Value="Auto" />
                                                            <Setter Property="Width"
                                                                    TargetName="ColumnDefinition1"
                                                                    Value="*" />
                                                            <Setter Property="Height"
                                                                    TargetName="RowDefinition0"
                                                                    Value="*" />
                                                            <Setter Property="Height"
                                                                    TargetName="RowDefinition1"
                                                                    Value="0" />
                                                            <Setter Property="Margin"
                                                                    TargetName="headerPanel"
                                                                    Value="2,2,0,2" />
                                                        </Trigger>
                                                        <Trigger Property="TabStripPlacement"
                                                                 Value="Right">
                                                            <Setter Property="Grid.Row"
                                                                    TargetName="headerPanel"
                                                                    Value="0" />
                                                            <Setter Property="Grid.Column"
                                                                    TargetName="headerPanel"
                                                                    Value="1" />
                                                            <Setter Property="Width"
                                                                    TargetName="ColumnDefinition0"
                                                                    Value="*" />
                                                            <Setter Property="Width"
                                                                    TargetName="ColumnDefinition1"
                                                                    Value="Auto" />
                                                            <Setter Property="Height"
                                                                    TargetName="RowDefinition0"
                                                                    Value="*" />
                                                            <Setter Property="Height"
                                                                    TargetName="RowDefinition1"
                                                                    Value="0" />
                                                            <Setter Property="Margin"
                                                                    TargetName="headerPanel"
                                                                    Value="0,2,2,2" />
                                                        </Trigger>
                                                        <Trigger Property="IsEnabled"
                                                                 Value="false">
                                                            <Setter Property="TextElement.Foreground"
                                                                    TargetName="templateRoot"
                                                                    Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}" />
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </ctrl2:FrostyTabControl.Style>
                                <ctrl2:FrostyTabItem Header="Log"
                                                     CloseButtonVisible="False">
                                    <Grid>
                                        <Border BorderBrush="{StaticResource ControlBackground}"
                                                RenderOptions.EdgeMode="Aliased"
                                                BorderThickness="0,2,0,0">
                                            <TextBox x:Name="tb"
                                                     FontFamily="Consolas"
                                                     IsReadOnly="True"
                                                     VerticalScrollBarVisibility="Auto"
                                                     HorizontalScrollBarVisibility="Auto"
                                                     Background="{StaticResource ListBackground}"
                                                     TextChanged="logTextBox_TextChanged" />
                                        </Border>
                                    </Grid>
                                </ctrl2:FrostyTabItem>
                                <ctrl2:FrostyTabItem x:Name="BookmarkTabItem"
                                                     Header="Bookmarks"
                                                     CloseButtonVisible="False"
                                                     Background="Transparent"
                                                     Loaded="BookmarkTabItem_Loaded">
                                    <ctrl2:FrostyTabItem.Style>
                                        <Style TargetType="{x:Type ctrl2:FrostyTabItem}">
                                            <Setter Property="Foreground"
                                                    Value="{StaticResource FontColor}" />
                                            <Setter Property="Padding"
                                                    Value="6,0,6,0" />
                                            <Setter Property="HorizontalContentAlignment"
                                                    Value="Stretch" />
                                            <Setter Property="VerticalContentAlignment"
                                                    Value="Stretch" />
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="{x:Type ctrl2:FrostyTabItem}">
                                                        <Grid x:Name="templateRoot"
                                                              SnapsToDevicePixels="True"
                                                              Height="20">
                                                            <StackPanel Orientation="Horizontal">
                                                                <Border x:Name="mainBorder"
                                                                        Background="{StaticResource ControlBackground}">
                                                                    <Grid>
                                                                        <Grid Margin="{TemplateBinding Padding}">
                                                                            <Grid.ColumnDefinitions>
                                                                                <ColumnDefinition Width="*" />
                                                                                <ColumnDefinition />
                                                                            </Grid.ColumnDefinitions>

                                                                            <ContentPresenter Grid.Column="0"
                                                                                              x:Name="contentPresenter"
                                                                                              ContentSource="Header"
                                                                                              Focusable="False"
                                                                                              HorizontalAlignment="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"
                                                                                              RecognizesAccessKey="False"
                                                                                              SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                                                                              VerticalAlignment="{Binding VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}" />
                                                                            <Label x:Name="PART_DragLabel"
                                                                                   HorizontalAlignment="Stretch"
                                                                                   VerticalAlignment="Stretch"
                                                                                   Grid.ColumnSpan="2" />
                                                                            <Button x:Name="PART_CloseButton"
                                                                                    Background="Transparent"
                                                                                    Grid.Column="1"
                                                                                    Width="16"
                                                                                    Height="16"
                                                                                    VerticalAlignment="Center"
                                                                                    HorizontalAlignment="Right"
                                                                                    Margin="4,0,-2,0">
                                                                                <Image Source="/FrostyEditor;component/Images/CloseWindow.png"
                                                                                       Margin="-2" />
                                                                            </Button>
                                                                        </Grid>
                                                                    </Grid>
                                                                </Border>
                                                                <Border Background="{TemplateBinding Background}" />

                                                                <Border x:Name="TabSeparatorDeco"
                                                                        Width="1"
                                                                        Height="22"
                                                                        Background="#1a1a1a" />
                                                            </StackPanel>
                                                        </Grid>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="CloseButtonVisible"
                                                                     Value="False">
                                                                <Setter Property="Visibility"
                                                                        TargetName="PART_CloseButton"
                                                                        Value="Collapsed" />
                                                            </Trigger>
                                                            <MultiDataTrigger>
                                                                <MultiDataTrigger.Conditions>
                                                                    <Condition Binding="{Binding IsSelected, RelativeSource={RelativeSource Self}}"
                                                                               Value="false" />
                                                                    <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource AncestorType={x:Type TabControl}}}"
                                                                               Value="Top" />
                                                                </MultiDataTrigger.Conditions>
                                                                <Setter Property="Background"
                                                                        TargetName="mainBorder"
                                                                        Value="#292929" />
                                                                <Setter Property="Foreground"
                                                                        Value="#80F8F8F8" />
                                                            </MultiDataTrigger>
                                                            <MultiDataTrigger>
                                                                <MultiDataTrigger.Conditions>
                                                                    <Condition Binding="{Binding IsMouseOver, RelativeSource={RelativeSource Self}}"
                                                                               Value="true" />
                                                                    <Condition Binding="{Binding IsSelected, RelativeSource={RelativeSource Self}}"
                                                                               Value="false" />
                                                                    <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource AncestorType={x:Type TabControl}}}"
                                                                               Value="Top" />
                                                                </MultiDataTrigger.Conditions>
                                                                <Setter Property="Background"
                                                                        TargetName="mainBorder"
                                                                        Value="#333333" />
                                                            </MultiDataTrigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </ctrl2:FrostyTabItem.Style>
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="26" />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>

                                        <!-- Backgrounds -->
                                        <Border Grid.RowSpan="2"
                                                Background="{StaticResource ListBackground}"
                                                RenderOptions.EdgeMode="Aliased" />
                                        <Border Background="{StaticResource ControlBackground}"
                                                RenderOptions.EdgeMode="Aliased" />

                                        <StackPanel Orientation="Horizontal"
                                                    Margin="0 0 3 0">
                                            <ComboBox x:Name="BookmarkContextPicker"
                                                      Width="150"
                                                      Margin="0,2,6,2"
                                                      IsEditable="False"
                                                      SelectionChanged="BookmarkContextPicker_SelectionChanged"
                                                      Padding="4,2,4,2"
                                                      IsEnabled="False">
                                                <ComboBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <TextBlock Text="{Binding Name}" />
                                                    </DataTemplate>
                                                </ComboBox.ItemTemplate>
                                            </ComboBox>
                                            <Button x:Name="BookmarkAddButton"
                                                    IsEnabled="False"
                                                    Margin="0,1,6,1"
                                                    Padding="0,0,0,0"
                                                    Width="22"
                                                    Height="22"
                                                    ToolTip="Add Bookmark (Ctrl+B)"
                                                    Click="BookmarkAddButton_Click">
                                                <Image Source="/FrostyEditor;component/Images/AddBookmark.png"
                                                       Width="16"
                                                       Height="16" />
                                            </Button>
                                            <Button x:Name="BookmarkRemoveButton"
                                                    IsEnabled="False"
                                                    Margin="0,1,6,1"
                                                    Padding="0,0,0,0"
                                                    Width="22"
                                                    Height="22"
                                                    ToolTip="Remove Bookmark (Ctrl+Shift+B)"
                                                    Click="BookmarkRemoveButton_Click">
                                                <Image Source="/FrostyEditor;component/Images/RemoveBookmark.png"
                                                       Width="16"
                                                       Height="16" />
                                            </Button>
                                            <Button x:Name="BookmarkAddFolderButton"
                                                    IsEnabled="True"
                                                    Margin="0,1,6,1"
                                                    Padding="0,0,0,0"
                                                    Width="22"
                                                    Height="22"
                                                    ToolTip="Add Folder"
                                                    Click="BookmarkAddFolderButton_Click">
                                                <Image Source="/FrostyEditor;component/Images/AddFolder.png"
                                                       Width="16"
                                                       Height="16" />
                                            </Button>
                                            <Button x:Name="BookmarkEditLabelButton"
                                                    IsEnabled="False"
                                                    Margin="0,1,6,1"
                                                    Padding="0,0,0,0"
                                                    Width="22"
                                                    Height="22"
                                                    ToolTip="Edit Name"
                                                    Click="BookmarkEditLabelButton_Click">
                                                <Image Source="/FrostyEditor;component/Images/EditLabel.png"
                                                       Width="16"
                                                       Height="16" />
                                            </Button>
                                            <Grid MinWidth="170">

                                                <Border Grid.Column="0"
                                                        Grid.ColumnSpan="2"
                                                        Margin="0,2,2,2"
                                                        BorderBrush="#868686"
                                                        BorderThickness="1">
                                                    <ctrl2:FrostyWatermarkTextBox x:Name="BookmarkFilterTextBox"
                                                                                  WatermarkText="Filter"
                                                                                  Padding="4,2,4,2"
                                                                                  TextChanged="BookmarkFilterTextBox_TextChanged" />
                                                </Border>

                                            </Grid>
                                            <Label x:Name="BookmarkFilterInfo"
                                                   FontFamily="MS Reference Sans Serif" />
                                        </StackPanel>
                                        <TreeView x:Name="BookmarkTreeView"
                                                  Grid.Row="1"
                                                  SelectedItemChanged="BookmarkTreeView_SelectedItemChanged"
                                                  ItemsSource="{Binding Path=SelectedItem.Bookmarks,ElementName=BookmarkContextPicker}">
                                            <TreeView.ItemContainerStyle>
                                                <Style TargetType="{x:Type TreeViewItem}">
                                                    <Setter Property="ContextMenu"
                                                            Value="{StaticResource bookmarksContextMenu}" />
                                                    <Setter Property="IsExpanded"
                                                            Value="{Binding Path=IsExpanded, Mode=TwoWay}" />
                                                    <Setter Property="IsSelected"
                                                            Value="{Binding Path=IsSelected, Mode=TwoWay}" />
                                                    <Setter Property="Background"
                                                            Value="Transparent" />
                                                    <EventSetter Event="TreeViewItem.PreviewMouseRightButtonDown"
                                                                 Handler="BookmarkTreeViewItem_PreviewMouseRightButtonDown" />
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="{x:Type TreeViewItem}">
                                                                <ControlTemplate.Resources>
                                                                    <SolidColorBrush x:Key="filterExclusionBrush"
                                                                                     Color="#7D1C1C1C" />
                                                                </ControlTemplate.Resources>
                                                                <Grid Visibility="{Binding Path=IsVisible, Converter={StaticResource booleanToVisibilityConverter}}">
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition MinWidth="19"
                                                                                          Width="Auto" />
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition Height="Auto" />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>

                                                                    <Grid Grid.Column="0"
                                                                          Grid.ColumnSpan="3">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition MinWidth="19"
                                                                                              Width="Auto" />
                                                                            <ColumnDefinition Width="Auto" />
                                                                            <ColumnDefinition Width="*" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <Label Grid.Column="1"
                                                                               x:Name="Bd"
                                                                               Grid.ColumnSpan="3"
                                                                               Margin="-10000,0,0,0"
                                                                               Background="{Binding Path=Background, RelativeSource={RelativeSource AncestorType={x:Type Grid}}}" />
                                                                        <ToggleButton x:Name="Expander"
                                                                                      ClickMode="Press"
                                                                                      IsChecked="{Binding IsExpanded, RelativeSource={RelativeSource TemplatedParent}}">
                                                                            <ToggleButton.Template>
                                                                                <ControlTemplate TargetType="{x:Type ToggleButton}">
                                                                                    <Border Background="Transparent"
                                                                                            Height="16"
                                                                                            Padding="5"
                                                                                            Width="16">
                                                                                        <Path x:Name="ExpandPath"
                                                                                              Fill="{StaticResource ControlPressed}"
                                                                                              Stroke="{StaticResource ControlPressed}">
                                                                                            <Path.Data>
                                                                                                <PathGeometry Figures="M0,0 L0,6 L6,0 z" />
                                                                                            </Path.Data>
                                                                                            <Path.RenderTransform>
                                                                                                <RotateTransform Angle="135"
                                                                                                                 CenterY="3"
                                                                                                                 CenterX="3" />
                                                                                            </Path.RenderTransform>
                                                                                        </Path>
                                                                                    </Border>
                                                                                    <ControlTemplate.Triggers>
                                                                                        <Trigger Property="IsChecked"
                                                                                                 Value="True">
                                                                                            <Setter Property="RenderTransform"
                                                                                                    TargetName="ExpandPath">
                                                                                                <Setter.Value>
                                                                                                    <RotateTransform Angle="180"
                                                                                                                     CenterY="3"
                                                                                                                     CenterX="3" />
                                                                                                </Setter.Value>
                                                                                            </Setter>
                                                                                        </Trigger>
                                                                                    </ControlTemplate.Triggers>
                                                                                </ControlTemplate>
                                                                            </ToggleButton.Template>
                                                                        </ToggleButton>
                                                                        <Border Grid.Column="1"
                                                                                BorderThickness="0"
                                                                                SnapsToDevicePixels="True">
                                                                            <ContentPresenter x:Name="PART_Header"
                                                                                              ContentSource="Header"
                                                                                              VerticalAlignment="Stretch" />
                                                                        </Border>
                                                                        <Label x:Name="filterExclusion"
                                                                               Grid.ColumnSpan="3"
                                                                               Margin="-10000,0,0,0"
                                                                               Background="{StaticResource filterExclusionBrush}"
                                                                               Visibility="{Binding Path=IsFiltered, Converter={StaticResource booleanToVisibilityConverter}}" />

                                                                        <Grid.Style>
                                                                            <Style TargetType="{x:Type Grid}">
                                                                                <Setter Property="Background"
                                                                                        Value="Transparent" />
                                                                                <Style.Triggers>
                                                                                    <Trigger Property="IsMouseOver"
                                                                                             Value="True">
                                                                                        <Setter Property="Background"
                                                                                                Value="#303030" />
                                                                                    </Trigger>
                                                                                </Style.Triggers>
                                                                            </Style>
                                                                        </Grid.Style>
                                                                    </Grid>
                                                                    <ItemsPresenter x:Name="ItemsHost"
                                                                                    Grid.ColumnSpan="2"
                                                                                    Grid.Column="1"
                                                                                    Grid.Row="1" />
                                                                </Grid>
                                                                <ControlTemplate.Triggers>
                                                                    <Trigger Property="IsExpanded"
                                                                             Value="False">
                                                                        <Setter Property="Visibility"
                                                                                TargetName="ItemsHost"
                                                                                Value="Collapsed" />
                                                                    </Trigger>
                                                                    <Trigger Property="HasItems"
                                                                             Value="False">
                                                                        <Setter Property="Visibility"
                                                                                TargetName="Expander"
                                                                                Value="Hidden" />
                                                                    </Trigger>
                                                                    <Trigger Property="IsSelected"
                                                                             Value="True">
                                                                        <Setter Property="Background"
                                                                                TargetName="Bd"
                                                                                Value="{StaticResource SubItemPressed}" />
                                                                    </Trigger>
                                                                </ControlTemplate.Triggers>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding Path=IsFolder}"
                                                                     Value="True">
                                                            <Setter Property="ContextMenu"
                                                                    Value="{x:Null}" />
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </TreeView.ItemContainerStyle>
                                            <TreeView.ItemTemplate>
                                                <HierarchicalDataTemplate ItemsSource="{Binding Path=Children}">
                                                    <StackPanel Orientation="Horizontal"
                                                                VerticalAlignment="Center"
                                                                Height="24">
                                                        <StackPanel.InputBindings>
                                                            <MouseBinding Gesture="LeftDoubleClick"
                                                                          Command="{Binding Path=BookmarkItemDoubleClickCommand, RelativeSource={RelativeSource AncestorType={x:Type local:MainWindow}}}" />
                                                        </StackPanel.InputBindings>
                                                        <Image x:Name="imageRect"
                                                               Grid.Column="0"
                                                               Width="16"
                                                               Height="16"
                                                               Source="{Binding Path=Icon}"
                                                               Margin="3,0,6,0" />
                                                        <ctrl2:FrostyEditableLabel Text="{Binding Path=Name, Mode=TwoWay}"
                                                                                   VerticalAlignment="Center"
                                                                                   Margin="0,0,0,0"
                                                                                   FontWeight="Bold"
                                                                                   EditEnded="FrostyEditableLabel_EditEnded" />
                                                        <TextBlock x:Name="bookmarkPath"
                                                                   Text="{Binding Path=Text}"
                                                                   Foreground="{StaticResource FontColor}"
                                                                   VerticalAlignment="Center"
                                                                   Margin="0,0,8,0"
                                                                   Opacity="0.5" />
                                                    </StackPanel>
                                                    <HierarchicalDataTemplate.Triggers>
                                                        <DataTrigger Binding="{Binding Path=Name}"
                                                                     Value="">
                                                            <Setter TargetName="bookmarkPath"
                                                                    Property="Opacity"
                                                                    Value="1" />
                                                        </DataTrigger>
                                                    </HierarchicalDataTemplate.Triggers>
                                                </HierarchicalDataTemplate>
                                            </TreeView.ItemTemplate>
                                        </TreeView>
                                    </Grid>
                                </ctrl2:FrostyTabItem>
                            </ctrl2:FrostyTabControl>

                            <ctrl2:FrostyDetachedTabControl Grid.Row="1"
                                                            x:Name="miscTabContent"
                                                            Foreground="{StaticResource FontColor}"
                                                            Grid.ColumnSpan="2" />
                        </Grid>
                    </Border>
                </Grid>
            </Grid>

            <Grid Grid.Row="4">
                <Border BorderThickness="2,0,2,2"
                        BorderBrush="{StaticResource ControlBackground}"
                        Background="#FF141414" />
            </Grid>
        </Grid>

        <Grid x:Name="taskWindow"
              Visibility="Collapsed"
              SnapsToDevicePixels="True">
            <Border Background="Transparent" />
            <Border Background="{StaticResource ControlBackground}"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Center"
                    Width="350"
                    Height="125"
                    BorderBrush="{StaticResource ListBackground}"
                    BorderThickness="1">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="20"
                                      ShadowDepth="1" />
                </Border.Effect>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition Height="23" />
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Row="0"
                                VerticalAlignment="Center"
                                HorizontalAlignment="Center"
                                Orientation="Vertical">
                        <TextBlock x:Name="taskTextBlock"
                                   Text="Header Text"
                                   Foreground="{StaticResource FontColor}"
                                   Margin="0,0,0,0"
                                   FontFamily="Global User Interface"
                                   FontSize="18"
                                   FontWeight="Bold"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Center" />
                    </StackPanel>

                    <Grid Grid.Row="1"
                          Background="{StaticResource WindowBackground}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="26" />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>

                        <ProgressBar Grid.Column="0"
                                     Grid.ColumnSpan="2"
                                     x:Name="taskProgressBar"
                                     Background="Transparent"
                                     BorderBrush="Transparent"
                                     Foreground="{StaticResource ListBackground}" />
                        <ctrl2:FrostySpinner Width="20"
                                             Height="20" />

                        <TextBlock x:Name="statusTextBox"
                                   Grid.Column="1"
                                   Background="Transparent"
                                   Text="Status Text"
                                   Padding="4,5,4,0"
                                   Foreground="{StaticResource FontColor}"
                                   FontFamily="Global User Interface"
                                   TextTrimming="CharacterEllipsis" />
                        <Button x:Name="taskCancelButton"
                                Content="Cancel"
                                HorizontalAlignment="Right"
                                Grid.Column="1"
                                Visibility="Collapsed" />
                    </Grid>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</ctrl2:FrostyWindow>   